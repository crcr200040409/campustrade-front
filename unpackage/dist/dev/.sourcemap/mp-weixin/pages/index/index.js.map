{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../../../../ProgramFiles/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"login-container\">\n    <image class=\"logo\" src=\"/static/logo.png\" alt=\"吉刻转 Logo\"></image>\n    <view class=\"text-area\">\n      <text class=\"title\">吉刻转</text>\n    </view>\n    <button class=\"wechat-login-button\" @click=\"wechatLogin\">使用微信登录</button>\n    <button class=\"guest-login-button\" @click=\"guestLogin\">游客登录</button>\n  </view>\r\n\n</template>\n\n<script>\nexport default {\n  data() {\n    return {};\n  },\n  methods: {\n    // 微信登录方法\n    // 微信登录方法\n    async wechatLogin() {\n      try {\n        // 调用微信登录接口，获取用户的登录凭证 code\n        const res = await uni.login({\n          provider: 'weixin',\n        });\n    \n        if (res.code) {\n          // 获取用户的授权信息\n          const userProfile = await uni.getUserProfile({\n            desc: '获取你的公开信息', // 描述用户授权目的\n          });\n    \n          // 如果用户同意授权\n          if (userProfile.userInfo) {\n            console.log('微信登录成功，userInfo:', userProfile.userInfo);\n    \n            // 使用获取到的 code 和用户信息，进行后端处理\n            const backendRes = await uni.request({\n              url: 'https://your-backend-url.com/api/login',  // 替换为您的后端 API 地址\n              method: 'POST',\n              data: {\n                code: res.code,  // 将 code 传递给服务器\n                userInfo: userProfile.userInfo,  // 传递用户信息\n              },\n              success: (response) => {\n                if (response.data && response.data.openid) {\n                  // 登录成功，获取到 openid 和 session_key\n                  console.log('用户 openid:', response.data.openid);\n                  uni.showToast({\n                    title: '登录成功',\n                    icon: 'success',\n                  });\n    \n\t\t\t\t\t uni.switchTab({\n\t\t\t\t\t   url: '/pages/home/home'\n\t\t\t\t\t });\n\n                } else {\n                  uni.showToast({\n                    title: response.data.errmsg || '登录失败',\n                    icon: 'none',\n                  });\n                }\n              },\n              fail: (error) => {\n                console.error('请求失败', error);\n                uni.showToast({\n                  title: '登录请求失败，请重试',\n                  icon: 'none',\n                });\n              },\n            });\n          } else {\n            uni.showToast({\n              title: '用户未授权',\n              icon: 'none',\n            });\n          }\n        } else {\n          uni.showToast({\n            title: '微信登录失败',\n            icon: 'none',\n          });\n        }\n      } catch (err) {\n        console.error('微信登录失败', err);\n        uni.showToast({\n          title: '微信登录失败',\n          icon: 'none',\n        });\n      }\n    },\n\n    // 游客登录方法\n    guestLogin() {\n      // 游客登录逻辑\n      console.log('游客登录成功');\n      uni.showToast({\n        title: '游客登录成功',\n        icon: 'success',\n      });\n      // 使用 switchTab 跳转到首页\n      uni.switchTab({\n        url: '/pages/home/home'\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n}\n\n.logo {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 40rpx;\n}\n\n.text-area {\n  margin-bottom: 30rpx;\n}\n\n.title {\n  font-size: 36rpx;\n  color: #8f8f94;\n}\n\n.wechat-login-button,\n.guest-login-button {\n  width: 100%;\n  padding: 14rpx;\n  border-radius: 6rpx;\n  font-size: 16px;\n  margin-top: 20rpx;\n}\n\n.wechat-login-button {\n  background-color: #1d9bf0;\n  color: white;\n}\n\n.guest-login-button {\n  background-color: #f0f0f0;\n  color: #1d9bf0;\n  border: 1px solid #1d9bf0;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAaA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;EACR;AAAA,EACD,SAAS;AAAA;AAAA;AAAA,IAGP,MAAM,cAAc;AAClB,UAAI;AAEF,cAAM,MAAM,MAAMA,cAAG,MAAC,MAAM;AAAA,UAC1B,UAAU;AAAA,QACZ,CAAC;AAED,YAAI,IAAI,MAAM;AAEZ,gBAAM,cAAc,MAAMA,cAAG,MAAC,eAAe;AAAA,YAC3C,MAAM;AAAA;AAAA,UACR,CAAC;AAGD,cAAI,YAAY,UAAU;AACxBA,0BAAA,MAAA,MAAA,OAAA,+BAAY,oBAAoB,YAAY,QAAQ;AAGpD,kBAAM,aAAa,MAAMA,cAAG,MAAC,QAAQ;AAAA,cACnC,KAAK;AAAA;AAAA,cACL,QAAQ;AAAA,cACR,MAAM;AAAA,gBACJ,MAAM,IAAI;AAAA;AAAA,gBACV,UAAU,YAAY;AAAA;AAAA,cACvB;AAAA,cACD,SAAS,CAAC,aAAa;AACrB,oBAAI,SAAS,QAAQ,SAAS,KAAK,QAAQ;AAEzCA,sCAAY,MAAA,OAAA,+BAAA,cAAc,SAAS,KAAK,MAAM;AAC9CA,gCAAAA,MAAI,UAAU;AAAA,oBACZ,OAAO;AAAA,oBACP,MAAM;AAAA,kBACR,CAAC;AAEbA,gCAAAA,MAAI,UAAU;AAAA,oBACZ,KAAK;AAAA,kBACP,CAAC;AAAA,uBAEgB;AACLA,gCAAAA,MAAI,UAAU;AAAA,oBACZ,OAAO,SAAS,KAAK,UAAU;AAAA,oBAC/B,MAAM;AAAA,kBACR,CAAC;AAAA,gBACH;AAAA,cACD;AAAA,cACD,MAAM,CAAC,UAAU;AACfA,8BAAc,MAAA,MAAA,SAAA,+BAAA,QAAQ,KAAK;AAC3BA,8BAAAA,MAAI,UAAU;AAAA,kBACZ,OAAO;AAAA,kBACP,MAAM;AAAA,gBACR,CAAC;AAAA,cACF;AAAA,YACH,CAAC;AAAA,iBACI;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YACR,CAAC;AAAA,UACH;AAAA,eACK;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,KAAK;AACZA,sBAAc,MAAA,MAAA,SAAA,+BAAA,UAAU,GAAG;AAC3BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACD;AAAA;AAAA,IAGD,aAAa;AAEXA,oBAAAA,MAAY,MAAA,OAAA,+BAAA,QAAQ;AACpBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAEDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA,EACF;AACH;;;;;;;;;AC3GA,GAAG,WAAW,eAAe;"}