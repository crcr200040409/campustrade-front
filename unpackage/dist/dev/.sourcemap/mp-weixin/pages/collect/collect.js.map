{"version":3,"file":"collect.js","sources":["pages/collect/collect.vue","../../../../../../ProgramFiles/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29sbGVjdC9jb2xsZWN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"collect-container\">\n    <text class=\"title\">我的收藏</text>\n\n    <view v-if=\"collectList.length === 0\" class=\"empty\">\n      暂无收藏商品\n    </view>\n\n    <view v-else class=\"commodity-list\">\n      <view\n          v-for=\"item in collectList\"\n          :key=\"item.commodityId\"\n          class=\"commodity-item\"\n          @click=\"viewProductDetail(item.commodityId)\"\n      >\n        <image :src=\"item.commodityPhoto\" class=\"commodity-photo\" mode=\"aspectFill\" />\n        <view class=\"commodity-info\">\n          <view class=\"name\">{{ item.commodityName }}</view>\n          <view class=\"desc\">{{ item.commodityDescription }}</view>\n          <view class=\"price\">¥{{ item.commodityPrice.toFixed(2) }}</view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport request from '@/api/request.js'\n\nconst collectList = ref([])\n\n// 获取用户收藏的商品\nconst loadCollectList = async () => {\n  const userInfo = uni.getStorageSync('userInfo')\n  if (!userInfo || !userInfo.openId) return\n\n  try {\n    const res = await request({\n      url: `/user/listCollectionCommodity?openId=${userInfo.openId}`,\n      method: 'POST'\n    })\n    console.log(\"获取用户收藏的商品----------->\", JSON.stringify(res, null, 2));\n    if (res.code === 200 && Array.isArray(res.data)) {\n      // 获取商品详细信息\n      const commodityDetails = await Promise.all(res.data.map(item => getCommodityDetail(item.commodityId)))\n      collectList.value = commodityDetails\n    }\n  } catch (err) {\n    console.error('加载收藏商品失败', err)\n  }\n}\n\n// 获取商品详情\nconst getCommodityDetail = async (commodityId) => {\n  try {\n    const res = await request({\n      url: '/commodity/getCommodityDetail',\n      method: 'POST',\n      data: commodityId \n    })\n    console.log(\"获取商品详情----------->\", JSON.stringify(res, null, 2));\n    if (res.code === 200 && res.data) {\n      return res.data\n    }\n  } catch (err) {\n    console.error('获取商品详情失败', err)\n  }\n}\n\n// 查看商品详情\nconst viewProductDetail = (commodityId) => {\n  uni.navigateTo({\n    url: `/pages/productDetail/productDetail?commodityId=${commodityId}`\n  })\n}\n\nonMounted(() => {\n  loadCollectList()\n})\n</script>\n<style scoped>\n.collect-container {\n  padding: 20rpx;\n  background-color: #f8f8f8;\n}\n\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n}\n\n.empty {\n  text-align: center;\n  color: #888;\n  margin-top: 100rpx;\n}\n\n.commodity-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.commodity-item {\n  display: flex;\n  background: #fff;\n  border-radius: 12rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n  cursor: pointer;\n}\n\n.commodity-photo {\n  width: 120rpx;\n  height: 120rpx;\n  object-fit: cover;\n  border-radius: 12rpx 0 0 12rpx;\n}\n\n.commodity-info {\n  flex: 1;\n  padding: 12rpx;\n}\n\n.name {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.desc {\n  font-size: 14px;\n  color: #666;\n  margin: 6rpx 0;\n}\n\n.price {\n  font-size: 16px;\n  color: #e91e63;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/collect/collect.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","request","onMounted"],"mappings":";;;;;;AA6BA,UAAM,cAAcA,cAAG,IAAC,EAAE;AAG1B,UAAM,kBAAkB,YAAY;AAClC,YAAM,WAAWC,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAI,CAAC,YAAY,CAAC,SAAS;AAAQ;AAEnC,UAAI;AACF,cAAM,MAAM,MAAMC,oBAAQ;AAAA,UACxB,KAAK,wCAAwC,SAAS,MAAM;AAAA,UAC5D,QAAQ;AAAA,QACd,CAAK;AACDD,sBAAAA,MAAY,MAAA,OAAA,mCAAA,yBAAyB,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC;AACjE,YAAI,IAAI,SAAS,OAAO,MAAM,QAAQ,IAAI,IAAI,GAAG;AAE/C,gBAAM,mBAAmB,MAAM,QAAQ,IAAI,IAAI,KAAK,IAAI,UAAQ,mBAAmB,KAAK,WAAW,CAAC,CAAC;AACrG,sBAAY,QAAQ;AAAA,QACrB;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,wDAAc,YAAY,GAAG;AAAA,MAC9B;AAAA,IACH;AAGA,UAAM,qBAAqB,OAAO,gBAAgB;AAChD,UAAI;AACF,cAAM,MAAM,MAAMC,oBAAQ;AAAA,UACxB,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,QACZ,CAAK;AACDD,sBAAAA,MAAY,MAAA,OAAA,mCAAA,sBAAsB,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC;AAC9D,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAChC,iBAAO,IAAI;AAAA,QACZ;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,wDAAc,YAAY,GAAG;AAAA,MAC9B;AAAA,IACH;AAGA,UAAM,oBAAoB,CAAC,gBAAgB;AACzCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,kDAAkD,WAAW;AAAA,MACtE,CAAG;AAAA,IACH;AAEAE,kBAAAA,UAAU,MAAM;AACd,sBAAiB;AAAA,IACnB,CAAC;;;;;;;;;;;;;;;;;;;;AC7ED,GAAG,WAAW,eAAe;"}