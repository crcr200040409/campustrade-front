{"version":3,"file":"search.js","sources":["pages/search/search.vue","../../../../../../ProgramFiles/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VhcmNoL3NlYXJjaC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 搜索框 -->\n    <uni-search-bar\n        @confirm=\"handleSearch\"\n        :focus=\"true\"\n        v-model=\"searchValue\"\n        @blur=\"blur\"\n        @focus=\"focus\"\n        @input=\"input\"\n        @cancel=\"cancel\"\n        @clear=\"clear\"\n    ></uni-search-bar>\n\n    <view class=\"search-result\">\n      <text class=\"search-result-text\">当前输入为：{{ searchValue }}</text>\n    </view>\n\n    <!-- 最近搜索 -->\n    <view class=\"section\" v-if=\"recentSearches.length > 0\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">最近搜索</text>\n        <text class=\"clear-btn\" @click=\"clearHistory\">清空</text>\n      </view>\n      <view class=\"search-tags\">\n        <view\n            class=\"tag\"\n            v-for=\"(item, index) in recentSearches\"\n            :key=\"index\"\n            @click=\"handleTagClick(item)\"\n            @longpress=\"removeSearchItem(index)\"\n        >\n          {{ item }}\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport {ref} from 'vue';\nimport {useUserStore} from '@/stores/user.js';\n\nconst userStore = useUserStore();\nconst searchValue = ref('');\n\n// 获取搜索记录\nconst recentSearches = ref(userStore.getRecentSearches);\n\n// 搜索处理\nconst handleSearch = () => {\n  if (!searchValue.value.trim()) return;\n  userStore.addSearchRecord(searchValue.value);\n  recentSearches.value = userStore.getRecentSearches;\n  uni.showToast({\n    title: '搜索：' + searchValue.value,\n    icon: 'none'\n  });\n  // 实际搜索逻辑，例如跳转到搜索结果页\n  // uni.navigateTo({ url: `/pages/search/result?keyword=${searchValue.value}` });\n};\n\n// 点击标签搜索\nconst handleTagClick = (value) => {\n  searchValue.value = value;\n  handleSearch();\n};\n\n// 长按删除单个搜索记录\nconst removeSearchItem = (index) => {\n  uni.showModal({\n    title: '提示',\n    content: '确定删除该搜索记录吗？',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.removeSearchRecord(index);\n        recentSearches.value = userStore.getRecentSearches;\n      }\n    }\n  });\n};\n\n// 清空搜索历史\nconst clearHistory = () => {\n  uni.showModal({\n    title: '提示',\n    content: '确定清空所有搜索记录吗？',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.clearSearchHistory();\n        recentSearches.value = [];\n      }\n    }\n  });\n};\n\n// 其他原有方法保持不变\nconst input = (res) => {\n  searchValue.value = res.value;\n};\nconst cancel = () => {\n  searchValue.value = '';\n};\nconst blur = () => {\n};\nconst focus = () => {\n};\nconst clear = () => {\n  searchValue.value = '';\n};\n</script>\n\n<style scoped>\n.container {\n  padding: 20px;\n  background-color: #fff;\n}\n\n.search-bar {\n  margin-top: 15px;\n  background-color: #f5f5f5;\n  border-radius: 25px;\n  border: 1px solid #ddd;\n}\n\n.search-tags {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10px;\n}\n\n.tag {\n  margin: 5px;\n  padding: 8px 15px;\n  background-color: #f1f1f1;\n  border-radius: 20px;\n  font-size: 14px;\n  color: #333;\n}\n\n.section {\n  margin-top: 20px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.section-title {\n  font-size: 16px;\n  color: #333;\n  font-weight: bold;\n}\n\n.clear-btn {\n  font-size: 14px;\n  color: #999;\n}\n</style>","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","uni"],"mappings":";;;;;;;;;;;;;;AA2CA,UAAM,YAAYA,YAAY,aAAA;AAC9B,UAAM,cAAcC,cAAAA,IAAI,EAAE;AAG1B,UAAM,iBAAiBA,cAAG,IAAC,UAAU,iBAAiB;AAGtD,UAAM,eAAe,MAAM;AACzB,UAAI,CAAC,YAAY,MAAM,KAAM;AAAE;AAC/B,gBAAU,gBAAgB,YAAY,KAAK;AAC3C,qBAAe,QAAQ,UAAU;AACjCC,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,QAAQ,YAAY;AAAA,QAC3B,MAAM;AAAA,MACV,CAAG;AAAA,IAGH;AAGA,UAAM,iBAAiB,CAAC,UAAU;AAChC,kBAAY,QAAQ;AACpB;IACF;AAGA,UAAM,mBAAmB,CAAC,UAAU;AAClCA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,mBAAmB,KAAK;AAClC,2BAAe,QAAQ,UAAU;AAAA,UAClC;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,mBAAkB;AAC5B,2BAAe,QAAQ;UACxB;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,QAAQ,CAAC,QAAQ;AACrB,kBAAY,QAAQ,IAAI;AAAA,IAC1B;AACA,UAAM,SAAS,MAAM;AACnB,kBAAY,QAAQ;AAAA,IACtB;AACA,UAAM,OAAO,MAAM;AAAA,IACnB;AACA,UAAM,QAAQ,MAAM;AAAA,IACpB;AACA,UAAM,QAAQ,MAAM;AAClB,kBAAY,QAAQ;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GA,GAAG,WAAW,eAAe;"}