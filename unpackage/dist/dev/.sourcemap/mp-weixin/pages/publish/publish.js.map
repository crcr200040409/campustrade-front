{"version":3,"file":"publish.js","sources":["pages/publish/publish.vue","../../../../../../ProgramFiles/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGlzaC9wdWJsaXNoLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"my-publish-container\">\n    <view class=\"title\">我发布的商品</view>\n\n    <view v-if=\"myCommodities.length === 0\" class=\"empty\">\n      暂无发布商品\n    </view>\n    <view v-else class=\"commodity-list\">\n      <view v-for=\"item in myCommodities\" :key=\"item.commodityId\" class=\"commodity-item\">\n        <image :src=\"item.commodityPhoto\" class=\"commodity-photo\" mode=\"aspectFill\" />\n        <view class=\"commodity-info\">\n          <view class=\"name\">{{ item.commodityName }}</view>\n          <view class=\"desc\">{{ item.commodityDescription }}</view>\n          <view class=\"price-time\">\n            <text class=\"price\">¥{{ item.commodityPrice.toFixed(2) }}</text>\n            <text class=\"time\">{{ formatTime(item.commodityPublishTime) }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport request from '@/api/request.js'\n\nconst myCommodities = ref([])\nconst userInfo = ref(uni.getStorageSync('userInfo') || {})\n\nconst loadMyPublished = async () => {\n  try {\n    const res = await request({\n      url: '/commodity/listCommodity',\n      method: 'POST',\n      data: {\n        pageSize: 50,\n        pageIndex: 1\n      }\n    })\n\n    if (res.code === 200 && Array.isArray(res.data)) {\n      myCommodities.value = res.data.filter(item => item.openId === userInfo.value.openId)\n    }\n  } catch (err) {\n    console.error('加载我的发布失败', err)\n  }\n}\n\nconst formatTime = (timeStr) => {\n  const date = new Date(timeStr)\n  return date.toLocaleDateString() + ' ' + date.toLocaleTimeString().slice(0, 5)\n}\n\nonMounted(() => {\n  loadMyPublished()\n})\n</script>\n<style scoped>\n.my-publish-container {\n  padding: 20rpx;\n  background-color: #f8f8f8;\n}\n\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n}\n\n.empty {\n  text-align: center;\n  color: #888;\n  margin-top: 100rpx;\n}\n\n.commodity-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.commodity-item {\n  display: flex;\n  background: #fff;\n  border-radius: 12rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.commodity-photo {\n  width: 120rpx;\n  height: 120rpx;\n  object-fit: cover;\n  border-radius: 12rpx 0 0 12rpx;\n}\n\n.commodity-info {\n  flex: 1;\n  padding: 12rpx;\n}\n\n.name {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.desc {\n  font-size: 14px;\n  color: #666;\n  margin: 6rpx 0;\n}\n\n.price-time {\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n  color: #999;\n}\n\n.price {\n  color: #e91e63;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/publish/publish.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","request","onMounted"],"mappings":";;;;;;AA0BA,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAC5B,UAAM,WAAWA,cAAG,IAACC,cAAG,MAAC,eAAe,UAAU,KAAK,CAAA,CAAE;AAEzD,UAAM,kBAAkB,YAAY;AAClC,UAAI;AACF,cAAM,MAAM,MAAMC,oBAAQ;AAAA,UACxB,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,WAAW;AAAA,UACZ;AAAA,QACP,CAAK;AAED,YAAI,IAAI,SAAS,OAAO,MAAM,QAAQ,IAAI,IAAI,GAAG;AAC/C,wBAAc,QAAQ,IAAI,KAAK,OAAO,UAAQ,KAAK,WAAW,SAAS,MAAM,MAAM;AAAA,QACpF;AAAA,MACF,SAAQ,KAAK;AACZD,sBAAAA,wDAAc,YAAY,GAAG;AAAA,MAC9B;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,YAAY;AAC9B,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,KAAK,mBAAoB,IAAG,MAAM,KAAK,qBAAqB,MAAM,GAAG,CAAC;AAAA,IAC/E;AAEAE,kBAAAA,UAAU,MAAM;AACd,sBAAiB;AAAA,IACnB,CAAC;;;;;;;;;;;;;;;;;;;;ACtDD,GAAG,WAAW,eAAe;"}