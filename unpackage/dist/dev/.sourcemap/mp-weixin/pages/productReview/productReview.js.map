{"version":3,"file":"productReview.js","sources":["pages/productReview/productReview.vue","../../../../../../ProgramFiles/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdFJldmlldy9wcm9kdWN0UmV2aWV3LnZ1ZQ"],"sourcesContent":["<template>\n  <view>\n    <!-- 商品列表 -->\n    <view v-for=\"product in pendingProducts\" :key=\"product.commodityId\" class=\"product-item\">\n      <image :src=\"product.commodityPhoto\" mode=\"aspectFill\" class=\"product-image\"/>\n      <view class=\"product-details\">\n        <text class=\"product-name\">{{ product.commodityName }}</text>\n        <text class=\"product-price\">¥{{ product.commodityPrice }}</text>\n      </view>\n      <button @click=\"openReviewModal(product)\" class=\"view-button\">查看详情</button>\n    </view>\n\n    <!-- 商品审核弹窗 -->\n    <view v-if=\"showModal\" class=\"modal\">\n      <view class=\"modal-content\">\n        <text class=\"modal-title\">商品名称: {{ currentProduct.commodityName }}</text>\n        <image :src=\"currentProduct.commodityPhoto\" mode=\"aspectFill\" class=\"product-image\"/>\n        <text class=\"modal-description\">描述: {{ currentProduct.commodityDescription }}</text>\n        <text class=\"modal-price\">价格: ¥{{ currentProduct.commodityPrice }}</text>\n        <text class=\"modal-publish-time\">发布时间: {{ currentProduct.commodityPublishTime }}</text>\n        <text class=\"modal-modify-time\">修改时间: {{ currentProduct.commodityModifyTime }}</text>\n\n        <view class=\"actions\">\n          <button @click=\"approveProduct(currentProduct.commodityId)\" class=\"approve-button\">通过</button>\n          <button @click=\"rejectProduct(currentProduct.commodityId)\" class=\"reject-button\">拒绝</button>\n          <button @click=\"closeModal\" class=\"close-button\">关闭</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nconst pendingProducts = ref([\n  {\n    commodityId: 111,\n    commodityName: \"城成\",\n    commodityPhoto: \"https://loremflickr.com/400/400?lock=2258253218856786\",\n    commodityDescription: \"道算百族领头听很性由。省门前始。\",\n    commodityPrice: 50.99,\n    commodityStatus: 0,\n    commodityPublishTime: \"2025-05-07T00:39:15\",\n    commodityModifyTime: \"2025-05-07T00:47:21\"\n  },\n  {\n    commodityId: 112,\n    commodityName: \"瑞德\",\n    commodityPhoto: \"https://loremflickr.com/400/400?lock=2258253218856787\",\n    commodityDescription: \"优雅的设计，经典的风格，适合任何场合。\",\n    commodityPrice: 120.50,\n    commodityStatus: 0,\n    commodityPublishTime: \"2025-05-06T14:15:00\",\n    commodityModifyTime: \"2025-05-06T14:20:00\"\n  },\n])  // 存放待审核商品列表\nconst showModal = ref(false)  // 控制弹窗显示\nconst currentProduct = ref({})  // 存放当前点击的商品信息\n\n// 获取待审核商品列表\nconst fetchPendingProducts = async () => {\n  const { data } = await uni.request({ url: '/api/admin/products/pending' })\n  pendingProducts.value = data\n}\n\n// 打开商品审核弹窗\nconst openReviewModal = (product) => {\n  currentProduct.value = product\n  showModal.value = true\n}\n\n// 关闭弹窗\nconst closeModal = () => {\n  showModal.value = false\n}\n\n// 审核通过\nconst approveProduct = async (id) => {\n  await uni.request({ url: `/api/admin/products/${id}/approve`, method: 'POST' })\n  fetchPendingProducts()  // 重新获取待审核商品列表\n  closeModal()  // 关闭弹窗\n}\n\n// 审核拒绝\nconst rejectProduct = async (id) => {\n  await uni.request({ url: `/api/admin/products/${id}/reject`, method: 'POST' })\n  fetchPendingProducts()  // 重新获取待审核商品列表\n  closeModal()  // 关闭弹窗\n}\n\n// 页面加载时获取待审核商品列表\nonMounted(fetchPendingProducts)\n</script>\n\n<style scoped>\n/* 商品项布局 */\n.product-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background-color: #fff;\n}\n\n.product-image {\n  width: 80px;\n  height: 80px;\n  object-fit: cover;\n  margin-right: 10px;\n}\n\n.product-details {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin-right: 10px;\n}\n\n.product-name {\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n}\n\n.product-price {\n  font-size: 14px;\n  color: #999;\n}\n\n.view-button {\n  background-color: #2196F3;\n  color: white;\n  border: none;\n  padding: 8px 15px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.view-button:hover {\n  background-color: #1976D2;\n}\n\n/* 弹窗样式 */\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n}\n\n/* 弹窗内容 */\n.modal-content {\n  background-color: #fff;\n  padding: 20px;\n  width: 80%;\n  max-width: 500px;\n  border-radius: 12px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  text-align: center;\n}\n\n.modal-title {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 10px;\n}\n\n.product-image {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  margin-bottom: 15px;\n}\n\n.modal-description,\n.modal-price,\n.modal-publish-time,\n.modal-modify-time {\n  font-size: 14px;\n  color: #666;\n  margin: 10px 0;\n  display: block;\n}\n\n.actions {\n  display: flex;\n  justify-content: space-around;\n  margin-top: 20px;\n}\n\nbutton {\n  padding: 8px 20px;\n  font-size: 16px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.approve-button {\n  background-color: #4CAF50;\n  color: white;\n}\n\n.reject-button {\n  background-color: #F44336;\n  color: white;\n}\n\n.close-button {\n  background-color: #9E9E9E;\n  color: white;\n}\n\nbutton:hover {\n  opacity: 0.8;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/productReview/productReview.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onMounted"],"mappings":";;;;;AAkCA,UAAM,kBAAkBA,cAAAA,IAAI;AAAA,MAC1B;AAAA,QACE,aAAa;AAAA,QACb,eAAe;AAAA,QACf,gBAAgB;AAAA,QAChB,sBAAsB;AAAA,QACtB,gBAAgB;AAAA,QAChB,iBAAiB;AAAA,QACjB,sBAAsB;AAAA,QACtB,qBAAqB;AAAA,MACtB;AAAA,MACD;AAAA,QACE,aAAa;AAAA,QACb,eAAe;AAAA,QACf,gBAAgB;AAAA,QAChB,sBAAsB;AAAA,QACtB,gBAAgB;AAAA,QAChB,iBAAiB;AAAA,QACjB,sBAAsB;AAAA,QACtB,qBAAqB;AAAA,MACtB;AAAA,IACH,CAAC;AACD,UAAM,YAAYA,cAAG,IAAC,KAAK;AAC3B,UAAM,iBAAiBA,cAAG,IAAC,EAAE;AAG7B,UAAM,uBAAuB,YAAY;AACvC,YAAM,EAAE,KAAI,IAAK,MAAMC,cAAAA,MAAI,QAAQ,EAAE,KAAK,+BAA+B;AACzE,sBAAgB,QAAQ;AAAA,IAC1B;AAGA,UAAM,kBAAkB,CAAC,YAAY;AACnC,qBAAe,QAAQ;AACvB,gBAAU,QAAQ;AAAA,IACpB;AAGA,UAAM,aAAa,MAAM;AACvB,gBAAU,QAAQ;AAAA,IACpB;AAGA,UAAM,iBAAiB,OAAO,OAAO;AACnC,YAAMA,oBAAI,QAAQ,EAAE,KAAK,uBAAuB,EAAE,YAAY,QAAQ,QAAQ;AAC9E,2BAAsB;AACtB,iBAAY;AAAA,IACd;AAGA,UAAM,gBAAgB,OAAO,OAAO;AAClC,YAAMA,oBAAI,QAAQ,EAAE,KAAK,uBAAuB,EAAE,WAAW,QAAQ,QAAQ;AAC7E,2BAAsB;AACtB,iBAAY;AAAA,IACd;AAGAC,kBAAS,UAAC,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1F9B,GAAG,WAAW,eAAe;"}