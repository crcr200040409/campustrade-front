{"version":3,"names":["response","common_vendor","ref","code","sessionId","testApi","wx$1","login","success","_success","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","userCode","response2","wrap","_callee$","_context","prev","next","value","api_request","request","url","sent","statusCode","data","showToast","title","icon","index","__f__","errMsg","stop","_x","apply","arguments","wx","createPage","MiniProgramPage"],"sources":["test.vue","cGFnZXMvdGVzdC90ZXN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view>\n    <button @click=\"testApi\">Test API</button>\n    <text>{{ response }}</text>\n  </view>\n  <view>\n    <button @click=\"testApi\">测试获取 code</button>\n    <text>获取的 code：{{ code }}</text>\n    <text>获取的 sessionId：{{ sessionId }}</text>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport request from '../../api/request'; // 引入封装的请求函数\n\n// 响应数据\nconst response = ref('');\nconst code = ref('');\nconst sessionId = ref('');\n// 测试API函数\nconst testApi = () => {\n  wx.login({\n    success: async (res) => {\n      const userCode = res.code;  // 获取 code\n      if (userCode) {\n        // 显示code\n        code.value = userCode;\n\n        // 发起请求\n        const response = await request({\n          url: '/weixin/sessionId/' + userCode\n        });\n\n        if (response.statusCode === 200) {\n          // 获取返回的 sessionId\n          sessionId.value = response.data.data;\n          wx.showToast({\n            title: '请求成功！',\n            icon: 'success',\n          });\n        } else {\n          wx.showToast({\n            title: '请求失败！',\n            icon: 'error',\n          });\n        }\n      } else {\n        console.log(\"获取用户登录状态失败!\" + res.errMsg);\n      }\n    }\n  });\n  // 使用封装的请求函数发送请求\n  // request({\n  //   url: '/user/test', // 后端接口地址\n  //   method: 'GET',\n  // }).then((data) => {\n  //     // 请求成功后更新响应数据\n  //     response.value = data;\n  //   })\n  //   .catch((error) => {\n  //     // 处理请求错误\n  //     response.value = '请求失败：' + error;\n  //   });\n};\n\n\n\n</script>\n\n<style scoped>\n/* 样式部分，根据需要自行调整 */\nbutton {\n  margin: 20px;\n  padding: 10px;\n  background-color: #007AFF;\n  color: white;\n  border-radius: 5px;\n  font-size: 16px;\n}\n\ntext {\n  display: block;\n  margin-top: 20px;\n  font-size: 16px;\n  color: #333;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/test/test.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;IAiBA,IAAMA,QAAA,GAAWC,aAAA,CAAAC,GAAA,CAAI,EAAE;IACvB,IAAMC,IAAA,GAAOF,aAAA,CAAAC,GAAA,CAAI,EAAE;IACnB,IAAME,SAAA,GAAYH,aAAA,CAAAC,GAAA,CAAI,EAAE;IAExB,IAAMG,OAAA,GAAU,SAAVA,QAAA,EAAgB;MACpBJ,aAAA,CAAAK,IAAA,CAAGC,KAAA,CAAM;QACPC,OAAA;UAAA,IAAAC,QAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAS,SAAAC,QAAOC,GAAA;YAAA,IAAAC,QAAA,EAAAC,SAAA;YAAA,OAAAL,oBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;cAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;gBAAA;kBACRN,QAAA,GAAWD,GAAA,CAAIX,IAAA;kBAAA,KACjBY,QAAA;oBAAAI,QAAA,CAAAE,IAAA;oBAAA;kBAAA;kBAEFlB,IAAA,CAAKmB,KAAA,GAAQP,QAAA;kBAAAI,QAAA,CAAAE,IAAA;kBAAA,OAGUE,WAAA,CAAAC,OAAA,CAAQ;oBAC7BC,GAAA,EAAK,uBAAuBV;kBACtC,CAAS;gBAAA;kBAFKC,SAAA,GAAAG,QAAA,CAAAO,IAAA;kBAIN,IAAIV,SAAA,CAASW,UAAA,KAAe,KAAK;oBAE/BvB,SAAA,CAAUkB,KAAA,GAAQN,SAAA,CAASY,IAAA,CAAKA,IAAA;oBAChC3B,aAAA,CAAAK,IAAA,CAAGuB,SAAA,CAAU;sBACXC,KAAA,EAAO;sBACPC,IAAA,EAAM;oBAClB,CAAW;kBACX,OAAe;oBACL9B,aAAA,CAAAK,IAAA,CAAGuB,SAAA,CAAU;sBACXC,KAAA,EAAO;sBACPC,IAAA,EAAM;oBAClB,CAAW;kBACF;kBAAAZ,QAAA,CAAAE,IAAA;kBAAA;gBAAA;kBAEDpB,aAAA,CAAY+B,KAAA,CAAAC,KAAA,qDAAgBnB,GAAA,CAAIoB,MAAM;gBAAA;gBAAA;kBAAA,OAAAf,QAAA,CAAAgB,IAAA;cAAA;YAAA,GAAAtB,OAAA;UAAA,CAEzC;UAAA,SA3BDL,QAAA4B,EAAA;YAAA,OAAA3B,QAAA,CAAA4B,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAA9B,OAAA;QAAA;MA4BJ,CAAG;IAaH;;;;;;;;;;;;;AC/DA+B,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}