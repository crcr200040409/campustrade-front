{"version":3,"names":["searchValue","common_vendor","ref","productList","fetchProductList","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","response","wrap","_callee$","_context","prev","next","api_request","request","url","method","data","pageSize","pageIndex","sent","code","value","index","showToast","title","icon","t0","__f__","stop","apply","arguments","viewProductDetail","_ref2","_callee2","commodityId","productDetail","_callee2$","_context2","navigateTo","concat","_x","search","input","res","cancel","onMounted","wx","createPage","MiniProgramPage"],"sources":["home.vue","cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- Notice bar at the top -->\n    <uni-notice-bar show-icon scrollable text=\"5月1号-5月5号放假要调休\" />\n\n    <!-- Main content area -->\n    <view class=\"main-content\">\n      <uni-search-bar\n          @confirm=\"search\"\n          :focus=\"true\"\n          v-model=\"searchValue\"\n          @blur=\"blur\"\n          @focus=\"focus\"\n          @input=\"input\"\n          @cancel=\"cancel\"\n          @clear=\"clear\">\n      </uni-search-bar>\n\n      <!-- Section headers for navigation -->\n      <view class=\"section-headers\">\n        <text class=\"section-header\" @click=\"findLike()\">猜你喜欢</text>\n        <text class=\"section-header\" @click=\"findNewpush()\">最新发布</text>\n        <text class=\"section-header\" @click=\"changeTab(2)\">价格</text>\n        <text class=\"section-header filter\" @click=\"changeTab(3)\">筛选</text>\n      </view>\n\n      <view class=\"product-list\">\n        <view class=\"product-card\" v-for=\"(product, index) in productList\" :key=\"index\" @click=\"viewProductDetail(product.commodityId)\">\n          <image :src=\"product.commodityPhoto || '/images/default.jpg'\" mode=\"aspectFill\" class=\"product-image\" />\n          <text class=\"product-title\">{{ product.commodityName }}</text>\n          <text class=\"product-description\">{{ product.commodityDescription }}</text>\n          <text class=\"product-price\">¥{{ product.commodityPrice.toFixed(2) }}</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport request from \"@/api/request.js\"; // 导入封装的请求方法\n\n// 初始化数据\nconst searchValue = ref('');\nconst productList = ref([]);\n\n// 模拟从接口获取商品数据\nconst fetchProductList = async () => {\n  try {\n    const response = await request({\n      url: \"/commodity/listCommodity\", // 请求商品列表接口\n      method: \"POST\",\n      data: {\n        pageSize: 10,\n        pageIndex: 1\n      }\n    });\n\n    if (response.code === 200 && response.data) {\n      productList.value = response.data; // 设置商品数据\n    } else {\n      uni.showToast({\n        title: '获取商品列表失败',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error(\"请求商品列表失败\", error);\n    uni.showToast({\n      title: '请求失败',\n      icon: 'none'\n    });\n  }\n};\n// 点击商品卡片查看详情\nconst viewProductDetail = async (commodityId) => {\n  try {\n    // 调用接口获取商品详情\n    const response = await request({\n      url: `/commodity/getCommodityDetail`,\n      method: \"GET\",\n      data: { commodityId }\n    });\n    if (response.code === 200) {\n      // 获取到商品详情后，跳转到商品详情页面\n      const productDetail = response.data;\n      uni.navigateTo({\n        url: `/pages/productDetail/productDetail?commodityId=${productDetail.commodityId}`\n      });\n    } else {\n      uni.showToast({\n        title: '获取商品详情失败',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error(\"获取商品详情失败\", error);\n    uni.showToast({\n      title: '请求失败',\n      icon: 'none'\n    });\n  }\n};\n// 搜索函数\nconst search = () => {\n  uni.showToast({\n    title: '搜索：' + searchValue.value,\n    icon: 'none'\n  });\n  uni.navigateTo({\n    url: '/pages/search/search',\n  });\n};\n\n// 输入事件\nconst input = (res) => {\n  searchValue.value = res.value;  // 实时更新搜索框的值\n};\n\n// 取消搜索\nconst cancel = () => {\n  searchValue.value = '';  // 清空搜索框\n};\n\n// 页面加载时获取商品列表\nonMounted(() => {\n  fetchProductList();  // 调用获取商品列表的函数\n});\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.main-content {\n  flex-grow: 1;\n  padding: 15px;\n}\n.section-headers {\n  display: flex;\n  margin-bottom: 15px;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10px;\n}\n\n.section-header {\n  margin-right: 20px;\n  font-size: 16px;\n  color: #666;\n}\n\n.section-header.active {\n  color: #1d9bf0;\n  font-weight: bold;\n}\n\n.section-header.filter {\n  margin-left: auto;\n  margin-right: 0;\n}\n\n.product-list {\n  background-color: white;\n  border-radius: 8px;\n  padding: 10px;\n}\n\n.product-card {\n  padding: 15px 0;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.product-card:last-child {\n  border-bottom: none;\n}\n\n.product-title {\n  font-size: 16px;\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.product-description {\n  font-size: 14px;\n  color: #666;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.product-price {\n  font-size: 16px;\n  color: #ff6b00;\n  display: block;\n}\n\n.product-image {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  margin-bottom: 10px;\n}\n</style>\n","import MiniProgramPage from 'D:/作业/软件工程/课程设计/campustrade/code/campustrade-front/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;IA6CA,IAAMA,WAAA,GAAcC,aAAA,CAAAC,GAAA,CAAI,EAAE;IAC1B,IAAMC,WAAA,GAAcF,aAAA,CAAAC,GAAA,CAAI,EAAE;IAG1B,IAAME,gBAAA;MAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAmB,SAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEEC,WAAA,CAAAC,OAAA,CAAQ;gBAC7BC,GAAA,EAAK;gBAAA;gBACLC,MAAA,EAAQ;gBACRC,IAAA,EAAM;kBACJC,QAAA,EAAU;kBACVC,SAAA,EAAW;gBACZ;cACP,CAAK;YAAA;cAPKZ,QAAA,GAAAG,QAAA,CAAAU,IAAA;cASN,IAAIb,QAAA,CAASc,IAAA,KAAS,OAAOd,QAAA,CAASU,IAAA,EAAM;gBAC1CjB,WAAA,CAAYsB,KAAA,GAAQf,QAAA,CAASU,IAAA;cACnC,OAAW;gBACLnB,aAAA,CAAAyB,KAAA,CAAIC,SAAA,CAAU;kBACZC,KAAA,EAAO;kBACPC,IAAA,EAAM;gBACd,CAAO;cACF;cAAAhB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAiB,EAAA,GAAAjB,QAAA;cAEDZ,aAAA,CAAAyB,KAAA,CAAAK,KAAA,uCAAc,YAAAlB,QAAA,CAAAiB,EAAA,CAAiB;cAC/B7B,aAAA,CAAAyB,KAAA,CAAIC,SAAA,CAAU;gBACZC,KAAA,EAAO;gBACPC,IAAA,EAAM;cACZ,CAAK;YAAA;YAAA;cAAA,OAAAhB,QAAA,CAAAmB,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA,CAEL;MAAA,gBA1BML,iBAAA;QAAA,OAAAC,IAAA,CAAA4B,KAAA,OAAAC,SAAA;MAAA;IAAA,GA0BN;IAEA,IAAMC,iBAAA;MAAA,IAAAC,KAAA,GAAA9B,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAoB,SAAA6B,SAAOC,WAAA;QAAA,IAAA5B,QAAA,EAAA6B,aAAA;QAAA,OAAAhC,oBAAA,GAAAI,IAAA,UAAA6B,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA3B,IAAA,GAAA2B,SAAA,CAAA1B,IAAA;YAAA;cAAA0B,SAAA,CAAA3B,IAAA;cAAA2B,SAAA,CAAA1B,IAAA;cAAA,OAGNC,WAAA,CAAAC,OAAA,CAAQ;gBAC7BC,GAAA,iCAAK;gBACLC,MAAA,EAAQ;gBACRC,IAAA,EAAM;kBAAEkB,WAAA,EAAAA;gBAAa;cAC3B,CAAK;YAAA;cAJK5B,QAAA,GAAA+B,SAAA,CAAAlB,IAAA;cAKN,IAAIb,QAAA,CAASc,IAAA,KAAS,KAAK;gBAEnBe,aAAA,GAAgB7B,QAAA,CAASU,IAAA;gBAC/BnB,aAAA,CAAAyB,KAAA,CAAIgB,UAAA,CAAW;kBACbxB,GAAA,oDAAAyB,MAAA,CAAuDJ,aAAA,CAAcD,WAAW;gBACxF,CAAO;cACP,OAAW;gBACLrC,aAAA,CAAAyB,KAAA,CAAIC,SAAA,CAAU;kBACZC,KAAA,EAAO;kBACPC,IAAA,EAAM;gBACd,CAAO;cACF;cAAAY,SAAA,CAAA1B,IAAA;cAAA;YAAA;cAAA0B,SAAA,CAAA3B,IAAA;cAAA2B,SAAA,CAAAX,EAAA,GAAAW,SAAA;cAEDxC,aAAA,CAAAyB,KAAA,CAAAK,KAAA,uCAAc,YAAAU,SAAA,CAAAX,EAAA,CAAiB;cAC/B7B,aAAA,CAAAyB,KAAA,CAAIC,SAAA,CAAU;gBACZC,KAAA,EAAO;gBACPC,IAAA,EAAM;cACZ,CAAK;YAAA;YAAA;cAAA,OAAAY,SAAA,CAAAT,IAAA;UAAA;QAAA,GAAAK,QAAA;MAAA,CAEL;MAAA,gBA3BMF,kBAAAS,EAAA;QAAA,OAAAR,KAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;IAAA,GA2BN;IAEA,IAAMW,MAAA,GAAS,SAATA,OAAA,EAAe;MACnB5C,aAAA,CAAAyB,KAAA,CAAIC,SAAA,CAAU;QACZC,KAAA,EAAO,QAAQ5B,WAAA,CAAYyB,KAAA;QAC3BI,IAAA,EAAM;MACV,CAAG;MACD5B,aAAA,CAAAyB,KAAA,CAAIgB,UAAA,CAAW;QACbxB,GAAA,EAAK;MACT,CAAG;IACH;IAGA,IAAM4B,KAAA,GAAQ,SAARA,MAASC,GAAA,EAAQ;MACrB/C,WAAA,CAAYyB,KAAA,GAAQsB,GAAA,CAAItB,KAAA;IAC1B;IAGA,IAAMuB,MAAA,GAAS,SAATA,OAAA,EAAe;MACnBhD,WAAA,CAAYyB,KAAA,GAAQ;IACtB;IAGAxB,aAAA,CAAAgD,SAAA,CAAU,YAAM;MACd7C,gBAAA;IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChID8C,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}