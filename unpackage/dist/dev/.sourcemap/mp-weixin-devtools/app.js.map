{"version":3,"names":["_sfc_main$1","setup","userStore","stores_user","useUserStore","data","currentPath","computed","_objectSpread2","mapState","tabList","user_type","utils_config","tabBarConfig","admin","user","watch","userStoreUser_type","newValue","updateCurrentPath","mounted","common_vendor","index","__f__","methods","switchTab","item","_this","pagePath","url","success","pages","getCurrentPages","length","route","_sfc_main","components","CustomTabbar","onLaunch","onShow","onHide","showTabBar","adminPages","userPages","includes","createApp","app","createSSRApp","App","use","createPinia","Pinia"],"sources":["CustomTabbar.vue","App.vue","main.js"],"sourcesContent":["<template>\r\n  <view class=\"custom-tabbar\">\r\n    <view\r\n        v-for=\"(item, index) in tabList\"\r\n        :key=\"index\"\r\n        class=\"tab-item\"\r\n        @click=\"switchTab(item)\"\r\n    >\r\n      <image\r\n          :src=\"currentPath === item.pagePath ? item.selectedIconPath : item.iconPath\"\r\n          class=\"tab-icon\"\r\n      />\r\n      <text :class=\"{active: currentPath === item.pagePath}\">{{ item.text }}</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { useUserStore } from '../stores/user'\r\nimport { tabBarConfig } from '../utils/config'\r\n\r\nexport default {\r\n  setup() {\r\n    const userStore = useUserStore()\r\n    return { userStore }\r\n  },data() {\r\n    return {\r\n      currentPath: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userRole']),\r\n    tabList() {\r\n      // 根据用户类型返回对应的导航配置\r\n      return this.userStore.user_type === 1 ? tabBarConfig.admin : tabBarConfig.user;\r\n    }\r\n  },\r\n  watch: {\r\n    'userStore.user_type': function(newValue) {\r\n      this.updateCurrentPath();\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(this.tabList);  // 确认tabList数据是否加载正确\r\n    this.updateCurrentPath()\r\n  },\r\n  methods: {\r\n\r\n    switchTab(item) {\r\n      console.log('Switching to', item.pagePath);\r\n      uni.switchTab({\r\n        url: item.pagePath,\r\n        success: () => this.updateCurrentPath()\r\n      })\r\n    },\r\n    updateCurrentPath() {\r\n      const pages = getCurrentPages()\r\n      console.log(pages)\r\n      this.currentPath = '/' + pages[pages.length - 1].route\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.custom-tabbar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 100rpx;\r\n  display: flex;\r\n  background: #ffffff;\r\n  box-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.tab-item {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.tab-icon {\r\n  width: 48rpx;\r\n  height: 48rpx;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.active {\r\n  color: #007AFF;\r\n}\r\n</style>","<template>\r\n  <view>\r\n    <view class=\"content\">\r\n      <slot></slot>\r\n    </view>\r\n    <custom-tabbar v-if=\"showTabBar\"></custom-tabbar>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport {useUserStore} from \"./stores/user\";\r\nimport CustomTabbar from './components/CustomTabbar.vue'\r\n\r\nexport default {\r\n  components: {\r\n    CustomTabbar\r\n  },\r\n  onLaunch: function() {\r\n    console.log('App Launch')\r\n  },\r\n  onShow: function() {\r\n    console.log('App Show')\r\n  },\r\n  onHide: function() {\r\n    console.log('App Hide')\r\n  },\r\n  setup() {\r\n    const userStore = useUserStore()\r\n    return { userStore }\r\n  },\r\n  computed: {\r\n    showTabBar() {\r\n      const pages = getCurrentPages()\r\n      const currentPath = '/' + pages[pages.length - 1].route\r\n      const adminPages = ['/pages/userManage/userManage', '/pages/categoryManage/categoryManage', '/pages/productReview/productReview', '/pages/profile/profile']\r\n      const userPages = ['/pages/home/home', '/pages/sell/sell', '/pages/messages/messages', '/pages/profile/profile']\r\n      return this.userStore.user_type === 1 ? adminPages.includes(currentPath) : userPages.includes(currentPath)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/*每个页面公共css */\r\n.content {\r\n  padding-bottom: 100rpx;\r\n}\r\n</style>\r\n","import App from './App'\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\n// #endif\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nimport * as Pinia from 'pinia';\nexport function createApp() {\n  const app = createSSRApp(App)\n  app.use(Pinia.createPinia());\n  return {\n    app,\n    Pinia, // 此处必须将 Pinia 返回\n  };\n}\n// #endif"],"mappings":"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","ignoreList":[]}